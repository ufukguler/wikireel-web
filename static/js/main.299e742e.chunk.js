(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(33)},24:function(e,t,a){},29:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(12),o=a.n(i),l=(a(23),a(24),a(35));let c="en";async function s(){try{var e;const a=(null===(e=(await l.a.get(`https://${c}.wikipedia.org/w/api.php`,{params:{action:"query",format:"json",generator:"random",grnnamespace:0,grnlimit:50,prop:"extracts|pageimages|info",inprop:"url",explaintext:1,exintro:1,exsectionformat:"plain",piprop:"original|thumbnail",pithumbsize:1e3,origin:"*"}})).data.query)||void 0===e?void 0:e.pages)||[],n=[];for(const e in a){const t=a[e];t.title&&t.extract&&t.original&&t.original.source&&n.push({title:t.title,extract:t.extract,fullurl:t.fullurl||t.canonicalurl||null,imageUrl:t.original.source})}return n}catch(t){return console.error("Error fetching Wikipedia data:",t),[]}}const m=e=>{let{item:t}=e;return r.a.createElement("div",{className:"position-absolute bottom-0 w-100 p-4 text-white",style:{background:"linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.8) 50%, rgba(0,0,0,0) 100%)"}},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-3"},r.a.createElement("h2",{className:"mb-0 fw-bold",itemProp:"headline"},t.title),t.fullurl&&r.a.createElement("a",{href:t.fullurl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline-light btn-sm rounded-pill px-3 hover-scale glass-effect"},"Read more",r.a.createElement("i",{className:"bi bi-box-arrow-up-right ms-2"}))),r.a.createElement("div",{className:"mb-3",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",overflow:"hidden",WebkitLineClamp:8,lineHeight:"1.5rem",maxHeight:"12rem"},itemProp:"articleBody"},r.a.createElement("p",{className:"mb-0",dangerouslySetInnerHTML:{__html:t.extract}})))},u=e=>{let{item:t,index:a,currentIndex:i}=e;const o=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=o.current,t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting})},{threshold:.5});return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[]),r.a.createElement("article",{ref:o,className:"position-relative w-100 h-100",itemScope:!0,itemType:"http://schema.org/Article"},r.a.createElement("script",{type:"application/ld+json"},JSON.stringify({"@context":"https://schema.org","@type":"Article",headline:t.title,description:t.extract,image:t.imageUrl,datePublished:(new Date).toISOString(),dateModified:(new Date).toISOString(),author:{"@type":"Organization",name:"Wikipedia"},publisher:{"@type":"Organization",name:"Wikipedia"}})),r.a.createElement("div",{className:"w-100 h-100 content-card-image",style:{backgroundImage:`url(${t.imageUrl})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundColor:"#000",position:"relative",minHeight:"100%"},itemProp:"image"},r.a.createElement(m,{item:t})))},d=e=>{let{onPrev:t,onNext:a,isPrevDisabled:n,isNextDisabled:i}=e;return r.a.createElement("div",{className:"position-absolute end-0 top-50 translate-middle-y me-4 d-flex flex-column gap-3"},r.a.createElement("button",{onClick:t,disabled:n,className:"btn btn-outline-light rounded-pill px-4 py-3 d-flex align-items-center gap-2 shadow-sm hover-scale glass-effect"},r.a.createElement("i",{className:"bi bi-chevron-up fs-5"})),r.a.createElement("button",{onClick:a,disabled:i,className:"btn btn-outline-light rounded-pill px-4 py-3 d-flex align-items-center gap-2 shadow-sm hover-scale glass-effect"},r.a.createElement("i",{className:"bi bi-chevron-down fs-5"})))};var g=a(36);const p=e=>{let{isLoading:t}=e;const a=r.a.useRef(null);return r.a.createElement(g.a,{in:t,timeout:300,classNames:"fade",unmountOnExit:!0,nodeRef:a},r.a.createElement("div",{ref:a,className:"position-fixed top-0 start-0 end-0 bottom-0 d-flex align-items-center justify-content-center bg-dark bg-opacity-50"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading..."))))},b=e=>{let{show:t}=e;const a=r.a.useRef(null);return r.a.createElement(g.a,{in:t,timeout:300,classNames:"fade",unmountOnExit:!0,nodeRef:a},r.a.createElement("div",{ref:a,className:"mobile-instructions position-fixed top-0 start-0 end-0 p-3 text-center bg-dark bg-opacity-75"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-center gap-2"},r.a.createElement("i",{className:"bi bi-arrow-up fs-4"}),r.a.createElement("span",{className:"text-white"},"Swipe up/down to navigate"),r.a.createElement("i",{className:"bi bi-arrow-down fs-4"}))))};a(10);const h=[{code:"en",name:"English"},{code:"tr",name:"T\xfcrk\xe7e"},{code:"de",name:"Deutsch"},{code:"fr",name:"Fran\xe7ais"},{code:"es",name:"Espa\xf1ol"},{code:"it",name:"Italiano"},{code:"pt",name:"Portugu\xeas"},{code:"ru",name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{code:"zh",name:"\u4e2d\u6587"},{code:"ja",name:"\u65e5\u672c\u8a9e"}],f=e=>{var t;let{currentLanguage:a,onLanguageChange:i,isMobile:o}=e;const[l,c]=Object(n.useState)(!1);return r.a.createElement("div",{className:`language-selector ${o?"mobile":""}`},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-outline-light dropdown-toggle w-100",type:"button",onClick:e=>{e.stopPropagation(),c(!l)},"aria-expanded":l},r.a.createElement("i",{className:"bi bi-translate me-2"}),(null===(t=h.find(e=>e.code===a))||void 0===t?void 0:t.name)||"Select Language"),l&&r.a.createElement("ul",{className:"dropdown-menu show",style:{display:"block"}},h.map(e=>r.a.createElement("li",{key:e.code},r.a.createElement("button",{className:`dropdown-item ${a===e.code?"active":""}`,onClick:()=>(e=>{i(e),c(!1)})(e.code)},e.name))))))},E=e=>{let{currentLanguage:t,onLanguageChange:a,onSearch:i,onExitSearch:o}=e;const[l,c]=Object(n.useState)(!1),[s,m]=Object(n.useState)(""),u=Object(n.useRef)(null),d=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&c(!1)};return l&&(document.addEventListener("mousedown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",e),document.body.style.overflow=""}},[l]),r.a.createElement("div",{className:"hamburger-menu",ref:d},r.a.createElement("button",{className:"hamburger-button",onClick:()=>c(!l),"aria-label":l?"Close menu":"Open menu"},r.a.createElement("i",{className:`bi bi-${l?"x":"list"}`})),r.a.createElement(g.a,{in:l,timeout:300,classNames:"menu",unmountOnExit:!0,nodeRef:u},r.a.createElement("div",{className:"menu-content",ref:u},r.a.createElement("div",{className:"menu-content-wrapper"},r.a.createElement("form",{onSubmit:e=>{console.info(`handleSearch: ${s.trim()}`),e.preventDefault(),s.trim()&&(i(s),c(!1))},className:"mb-3"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control bg-dark text-white border-light",placeholder:"Search Wikipedia...",value:s,onChange:e=>m(e.target.value)}),s&&r.a.createElement("button",{type:"button",className:"btn btn-outline-light",onClick:()=>{m(""),console.info("handleExitSearch"),o(),c(!1)}},r.a.createElement("i",{className:"bi bi-x"})),r.a.createElement("button",{className:"btn btn-outline-light",type:"submit"},r.a.createElement("i",{className:"bi bi-search"}))))),r.a.createElement(f,{currentLanguage:t,onLanguageChange:e=>{a(e),c(!1)},isMobile:!0}))))},w=e=>new Promise((t,a)=>{const n=new Image;n.src=e,n.onload=(()=>t()),n.onerror=(()=>a(new Error(`Failed to preload image: ${e}`)))});a(29);var v=a(13),y=a.n(v);var x=()=>{const[e,t]=Object(n.useState)([]),[a,i]=Object(n.useState)(0),[o,m]=Object(n.useState)(!0),[h,f]=Object(n.useState)(!1),[v,x]=Object(n.useState)(!1),[N,k]=Object(n.useState)("next"),[O,S]=Object(n.useState)(!0),[j,L]=Object(n.useState)(null),[C,R]=Object(n.useState)(window.innerWidth<=768),[W,D]=Object(n.useState)(!0),[I,P]=Object(n.useState)("en"),T=Object(n.useRef)(!1),z=Object(n.useRef)(null),U=async()=>{if(console.info("fetchData"),!T.current){T.current=!0,m(!0);try{const a=await s();t(a),a.length>0&&await w(a[0].imageUrl)}catch(e){console.error("Error fetching Wikipedia data:",e)}finally{m(!1),S(!1)}}},$=Object(n.useCallback)(async()=>{if(console.info("fetchMoreData"),!v){x(!0);try{const a=await s();t(e=>[...e,...a]),a.length>0&&await w(a[0].imageUrl)}catch(e){console.error("Error fetching more Wikipedia data:",e)}finally{x(!1)}}},[v]);Object(n.useEffect)(()=>{y.a.initialize("G-LZ7F2X9Q9G"),U()},[]),Object(n.useEffect)(()=>{e.length>0&&(async()=>{e.length-a-1<=5&&await $()})()},[a,e,$]),Object(n.useEffect)(()=>{e.length>0&&(async()=>{if(a<e.length-1&&!h)try{await w(e[a+1].imageUrl)}catch(t){console.error("Error preloading image:",t)}})()},[a,e,h]);Object(n.useEffect)(()=>{const e=()=>{R(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),Object(n.useEffect)(()=>{if(C&&W){const e=setTimeout(()=>{D(!1)},5e3);return()=>clearTimeout(e)}},[C,W]);const M=async()=>{a<e.length-1&&(k("next"),f(!0),i(a+1),f(!1))},A=async()=>{a>0&&(k("prev"),f(!0),i(a-1),f(!1))};return Object(n.useEffect)(()=>{const e=e=>{if(!h)switch(e.key){case"ArrowDown":case"ArrowRight":e.preventDefault(),M();break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),A()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[h,a,e.length]),r.a.createElement("div",{className:"vh-100 bg-dark text-white position-relative overflow-hidden",onTouchStart:e=>{L(e.touches[0].clientY)},onTouchMove:e=>{if(!j)return;const t=e.touches[0].clientY,a=j-t;Math.abs(a)>50&&(a>0?M():A(),L(null))},onTouchEnd:()=>{L(null)},style:{position:"relative"}},r.a.createElement("h1",{className:"visually-hidden"},"WikiReel - Wikipedia Content Explorer"),r.a.createElement(p,{isLoading:o}),r.a.createElement(b,{show:C&&W}),r.a.createElement("div",{style:{position:"relative",zIndex:1050}},r.a.createElement(E,{currentLanguage:I,onLanguageChange:async e=>{P(e),(e=>{c=e})(e),m(!0),t([]),i(0),T.current=!1;try{const e=await s();t(e),e.length>0&&await w(e[0].imageUrl)}catch(a){console.error("Error fetching Wikipedia data:",a)}finally{m(!1)}},onSearch:async e=>{console.info(`handleSearch: ${e}`),t([]),m(!0);try{const n=await async function(e){try{var t;const r=(null===(t=(await l.a.get(`https://${c}.wikipedia.org/w/api.php`,{params:{action:"query",format:"json",generator:"search",gsrnamespace:0,gsrlimit:50,gsrsearch:e,prop:"extracts|pageimages|info",inprop:"url",exintro:1,exsectionformat:"plain",piprop:"original|thumbnail",pithumbsize:1e3,origin:"*"}})).data.query)||void 0===t?void 0:t.pages)||[],i=[];for(const e in r){const t=r[e];var a;t.title&&t.extract&&i.push({title:t.title,extract:t.extract,fullurl:t.fullurl||t.canonicalurl||null,imageUrl:(null===(a=t.original)||void 0===a?void 0:a.source)||""})}return i}catch(n){return console.error("Error searching Wikipedia:",n),[]}}(e);t(n),i(0),n.length>0&&await w(n[0].imageUrl)}catch(a){console.error("Error searching Wikipedia:",a)}finally{m(!1)}},onExitSearch:()=>{console.info("handleExitSearch"),m(!0),t([]),T.current=!1,U()}})),r.a.createElement("div",{className:"position-relative w-100 h-100 hide-scrollbar",style:{overflowY:C?"scroll":"hidden",scrollSnapType:C?"y mandatory":"none",WebkitOverflowScrolling:"touch"},onScroll:e=>{if(C){const{scrollTop:t,scrollHeight:a,clientHeight:n}=e.currentTarget;a-t-n<1e3&&$()}}},e.length?C?e.map((e,t)=>r.a.createElement("div",{key:t,className:"w-100 h-100",style:{scrollSnapAlign:C?"start":"none",position:"relative"}},r.a.createElement("div",{className:"content-container",style:{width:C?"100%":"min(70vw, 800px)",height:"100%",margin:"0 auto"}},r.a.createElement(u,{item:e,index:t,currentIndex:a})))):r.a.createElement(g.a,{in:!O,timeout:300,classNames:"next"===N?"slide":"slide-reverse",key:a,nodeRef:z,appear:!O},r.a.createElement("div",{ref:z,className:"position-absolute w-100 h-100 d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"content-container",style:{width:C?"100%":"min(70vw, 800px)",height:"100%"}},r.a.createElement(u,{item:e[a],index:0,currentIndex:0})))):r.a.createElement(r.a.Fragment,null)),!C&&r.a.createElement(d,{onPrev:A,onNext:M,isPrevDisabled:0===a||h,isNextDisabled:h}))};o.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)))}},[[16,1,2]]]);
//# sourceMappingURL=main.299e742e.chunk.js.map